{% extends "base.html" %}
{% block content %}
<div class="flex justify-center">
    <div class="glass-effect p-8 rounded-3xl shadow-2xl max-w-lg w-full card-hover">
        <div class="text-center mb-6">
            <h1 class="text-4xl font-bold rainbow-text mb-2">Join the Squad! 
                <span class="emoji-float">🎉</span>
            </h1>
            <p class="text-gray-700 font-medium">Create your account and let's get this party started!</p>
        </div>
        
        <form method="POST" action="{{ url_for('signup') }}" class="space-y-5">
            <div class="relative">
                <input type="text" name="username" class="w-full p-4 rounded-2xl border-2 border-transparent bg-white bg-opacity-80 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:bg-opacity-100 transition-all duration-300 font-medium" placeholder="🙋‍♂️ What should we call you?" required>
            </div>
            
            <div class="relative">
                <input type="email" name="email" class="w-full p-4 rounded-2xl border-2 border-transparent bg-white bg-opacity-80 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:bg-opacity-100 transition-all duration-300 font-medium" placeholder="📧 Your awesome email" required>
            </div>
            
            <div class="relative">
                <input type="password" name="password" class="w-full p-4 rounded-2xl border-2 border-transparent bg-white bg-opacity-80 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:bg-opacity-100 transition-all duration-300 font-medium" placeholder="🔒 Super secret password" required>
            </div>
            
            <div class="bg-white bg-opacity-60 p-4 rounded-2xl">
                <label class="block text-center font-bold text-gray-800 mb-3">
                    <span class="text-2xl mr-2">👤</span>Who are you?
                </label>
                <div class="flex justify-center space-x-6">
                    <label class="flex items-center cursor-pointer p-3 rounded-xl transition-all duration-300 hover:bg-blue-200 hover:bg-opacity-50">
                        <input type="radio" name="user_type" id="studentRadio" value="student" checked class="sr-only">
                        <div class="w-5 h-5 rounded-full border-2 border-blue-500 flex items-center justify-center mr-3">
                            <div class="w-3 h-3 rounded-full bg-blue-500 opacity-0 transition-opacity duration-300"></div>
                        </div>
                        <span class="text-lg">🎓 Student</span>
                    </label>
                    <label class="flex items-center cursor-pointer p-3 rounded-xl transition-all duration-300 hover:bg-purple-200 hover:bg-opacity-50">
                        <input type="radio" name="user_type" id="teacherRadio" value="teacher" class="sr-only">
                        <div class="w-5 h-5 rounded-full border-2 border-purple-500 flex items-center justify-center mr-3">
                            <div class="w-3 h-3 rounded-full bg-purple-500 opacity-0 transition-opacity duration-300"></div>
                        </div>
                        <span class="text-lg">👨‍🏫 Teacher</span>
                    </label>
                </div>
            </div>

            <div id="class-fields" class="space-y-4">
                <div class="relative">
                    <label class="block text-sm font-bold text-gray-700 mb-2 flex items-center">
                        <span class="text-xl mr-2">🏫</span>Pick your class
                    </label>
                    <select id="class-name-select" name="class_name" class="w-full p-4 rounded-2xl border-2 border-transparent bg-white bg-opacity-80 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:bg-opacity-100 transition-all duration-300 font-medium" required>
                        <option value="MCA - 1">🎯 MCA - 1</option>
                        <option value="MCA - 2">🚀 MCA - 2</option>
                    </select>
                </div>
            </div>

            <div id="teacher-subject-field-container" class="space-y-4" style="display: none;">
                <div class="relative">
                    <label class="block text-sm font-bold text-gray-700 mb-2 flex items-center">
                        <span class="text-xl mr-2">📖</span>What do you teach?
                    </label>
                    <input type="text" id="teacher-subject-field" name="subject" class="w-full p-4 rounded-2xl border-2 border-transparent bg-white bg-opacity-80 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:bg-opacity-100 transition-all duration-300 font-medium" placeholder="e.g., Data Structures, Web Development" required>
                </div>
            </div>

            <button type="submit" class="w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white p-4 rounded-2xl font-bold text-xl hover:from-blue-600 hover:to-purple-700 transition-all duration-300 btn-fun shadow-lg">
                <span class="mr-2">🎊</span>Let's Get Started!
            </button>
        </form>
        
        <div class="text-center mt-6">
            <p class="text-gray-700">
                Already part of the crew? 
                <a href="{{ url_for('login') }}" class="text-blue-600 hover:text-blue-800 font-bold hover:underline transition-colors">
                    Jump back in! 🏃‍♂️
                </a>
            </p>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const studentRadio = document.getElementById('studentRadio');
        const teacherRadio = document.getElementById('teacherRadio');
        const teacherSubjectFieldContainer = document.getElementById('teacher-subject-field-container');
        const teacherSubjectField = document.getElementById('teacher-subject-field');
        
        // Handle radio button visual feedback
        const radioInputs = document.querySelectorAll('input[type="radio"]');
        radioInputs.forEach(radio => {
            radio.addEventListener('change', function() {
                radioInputs.forEach(r => {
                    const indicator = r.parentElement.querySelector('div div');
                    indicator.style.opacity = r.checked ? '1' : '0';
                });
            });
        });
        
        function toggleFields() {
            if (studentRadio.checked) {
                teacherSubjectFieldContainer.style.display = 'none';
                teacherSubjectField.required = false;
            } else if (teacherRadio.checked) {
                teacherSubjectFieldContainer.style.display = 'block';
                teacherSubjectField.required = true;
            }
        }

        const userRadios = document.querySelectorAll('input[name="user_type"]');
        userRadios.forEach(radio => radio.addEventListener('change', toggleFields));
        
        // Initialize
        toggleFields();
        studentRadio.dispatchEvent(new Event('change'));
    });
</script>
{% endblock %}